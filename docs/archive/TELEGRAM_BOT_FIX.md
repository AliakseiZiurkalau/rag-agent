# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Telegram Bot –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å Telegram –±–æ—Ç–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `python-telegram-bot`.

## –ü—Ä–∏—á–∏–Ω–∞

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `python-telegram-bot==20.7` –±—ã–ª–∞ —É–∫–∞–∑–∞–Ω–∞ –≤ `requirements.txt`, –Ω–æ –Ω–µ –±—ã–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

## –†–µ—à–µ–Ω–∏–µ

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É
pip install python-telegram-bot==20.7
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
./stop.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
./start.sh
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å—ã:
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep "python main.py"

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
kill <PID>

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
python main.py
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
pip list | grep telegram

# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:
# python-telegram-bot    20.7

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
curl http://localhost:8000/telegram/status
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
    "is_running": false,
    "token_configured": false
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: http://localhost:3000
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Settings** ‚Üí **ü§ñ Telegram Bot**
3. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –æ—Ç [@BotFather](https://t.me/BotFather)
4. –ù–∞–∂–º–∏—Ç–µ **"–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞"**
5. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è: "‚úì Telegram –±–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!"

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

### 1. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ API

```bash
curl -X POST "http://localhost:8000/telegram/start" \
  -H "Content-Type: application/json" \
  -d '{"bot_token": "YOUR_BOT_TOKEN"}'
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
    "status": "started",
    "message": "Telegram bot started successfully",
    "bot_username": "your_bot_name"
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
curl http://localhost:8000/telegram/status
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–º –±–æ—Ç–µ:**
```json
{
    "is_running": true,
    "bot_username": "your_bot_name"
}
```

### 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

```bash
curl -X POST "http://localhost:8000/telegram/stop"
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞: "Invalid token"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω —É [@BotFather](https://t.me/BotFather)
2. –§–æ—Ä–º–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

### –û—à–∏–±–∫–∞: "Connection error"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
ping telegram.org

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS
nslookup api.telegram.org
```

### –û—à–∏–±–∫–∞: "Module not found: telegram"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install python-telegram-bot==20.7
```

### –û—à–∏–±–∫–∞: "Backend not responding"

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep "python main.py"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
./stop.sh && ./start.sh
```

## –õ–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Telegram –±–æ—Ç–∞

```bash
# –í—Å–µ –ª–æ–≥–∏
tail -f logs/rag_agent.log

# –¢–æ–ª—å–∫–æ Telegram
tail -f logs/rag_agent.log | grep -i telegram

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -50 logs/rag_agent.log | grep -i telegram
```

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

**–£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫:**
```
2025-12-08 10:00:00 - api.server - INFO - Starting Telegram bot...
2025-12-08 10:00:01 - src.telegram_bot - INFO - Telegram bot started: @your_bot_name
2025-12-08 10:00:01 - api.server - INFO - Telegram bot started successfully
```

**–û—à–∏–±–∫–∞ —Ç–æ–∫–µ–Ω–∞:**
```
2025-12-08 10:00:00 - api.server - ERROR - Failed to start Telegram bot: Invalid token
```

**–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```
2025-12-08 10:00:00 - api.server - ERROR - Failed to start Telegram bot: Connection error
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ requirements.txt

–ï—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `requirements.txt`, –¥–æ–±–∞–≤—å—Ç–µ:

```bash
echo "python-telegram-bot==20.7" >> requirements.txt
```

–ò–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é:
```txt
# Telegram Bot
python-telegram-bot==20.7
```

## –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:

```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt --force-reinstall

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–∏—Ç—å
pip install -r requirements.txt --upgrade
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
pip show python-telegram-bot

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# Name: python-telegram-bot
# Version: 20.7
# Summary: We have made you a wrapper you can't refuse
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ python-telegram-bot

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ç—Ä–µ–±—É–µ—Ç:
- `httpx~=0.25.2` - HTTP –∫–ª–∏–µ–Ω—Ç
- `anyio` - Async I/O
- `certifi` - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- `httpcore==1.*` - HTTP —è–¥—Ä–æ
- `idna` - –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤
- `sniffio` - Async detection

–í—Å–µ —ç—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **Python:** 3.9+
- **python-telegram-bot:** 20.7
- **Telegram Bot API:** 6.9+

## –°—Ç–∞—Ç—É—Å

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- Endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —É [@BotFather](https://t.me/BotFather)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã: `/start`, `/help`, `/stats`
4. –ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –±–æ—Ç—É

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Telegram Bot Guide](docs/guides/TELEGRAM.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [Troubleshooting](docs/guides/TROUBLESHOOTING.md) - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- [python-telegram-bot docs](https://docs.python-telegram-bot.org/) - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –î–µ–∫–∞–±—Ä—å 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ—à–µ–Ω–æ
