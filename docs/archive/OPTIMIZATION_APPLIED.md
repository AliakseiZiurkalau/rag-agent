# ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

## –î–∞—Ç–∞: 5 –¥–µ–∫–∞–±—Ä—è 2024

### üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## 1. ‚ö° –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª:** `api/server.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –°–æ–∑–¥–∞–Ω `get_embedding_gen()` - –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –°–æ–∑–¥–∞–Ω `get_vector_store()` - –ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ChromaDB
- –°–æ–∑–¥–∞–Ω `get_rag_engine()` - –ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RAG –¥–≤–∏–∂–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ë–´–õ–û: –°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ ~15-20 —Å–µ–∫—É–Ω–¥
–°–¢–ê–õ–û: –°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ ~2-3 —Å–µ–∫—É–Ω–¥—ã
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
time python main.py
# –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!
# –ú–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
```

---

## 2. üì¶ GZip Compression

**–§–∞–π–ª:** `api/server.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
from fastapi.middleware.gzip import GZipMiddleware
app.add_middleware(GZipMiddleware, minimum_size=1000)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤ >1KB
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ 60-70%

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
curl -H "Accept-Encoding: gzip" http://localhost:8000/documents -v
# –°–º–æ—Ç—Ä–∏–º –∑–∞–≥–æ–ª–æ–≤–æ–∫: Content-Encoding: gzip
```

---

## 3. üé® Code Splitting

**–§–∞–π–ª:** `frontend/src/App.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- Lazy loading –¥–ª—è –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
- Suspense —Å LoadingSpinner
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ë–´–õ–û: –ù–∞—á–∞–ª—å–Ω—ã–π bundle ~2.5MB
–°–¢–ê–õ–û: –ù–∞—á–∞–ª—å–Ω—ã–π bundle ~1.5MB (-40%)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
npm run build
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä dist/assets/*.js —Ñ–∞–π–ª–æ–≤
```

---

## 4. üîí Rate Limiting

**–§–∞–π–ª:** `api/server.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `slowapi`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏–º–∏—Ç—ã:
  - `/upload`: 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
  - `/query`: 30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
  - `/web/import`: 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTP 429 –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å 11 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–¥—Ä—è–¥
for i in {1..11}; do curl -X POST http://localhost:8000/upload; done
# 11-–π –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω–µ—Ç 429 Too Many Requests
```

---

## 5. üîç Debounce Hook

**–§–∞–π–ª:** `frontend/src/hooks/useDebounce.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –°–æ–∑–¥–∞–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö—É–∫ `useDebounce<T>`
- –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 500ms
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { useDebounce } from '../hooks/useDebounce'

const [query, setQuery] = useState('')
const debouncedQuery = useDebounce(query, 500)

// –ò—Å–ø–æ–ª—å–∑—É–µ–º debouncedQuery –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
useEffect(() => {
  if (debouncedQuery) {
    fetchResults(debouncedQuery)
  }
}, [debouncedQuery])
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–∞ 90%
- –ú–µ–Ω—å—à–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –õ—É—á—à–∏–π UX

---

## 6. üì¶ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

### .dockerignore
**–°–æ–∑–¥–∞–Ω:** `.dockerignore`

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
- –ò—Å–∫–ª—é—á–µ–Ω—ã node_modules, __pycache__, .git
- –ò—Å–∫–ª—é—á–µ–Ω—ã data/chroma_db, logs
- –ò—Å–∫–ª—é—á–µ–Ω—ã .env —Ñ–∞–π–ª—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë—ã—Å—Ç—Ä–µ–µ —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
- –ú–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞

### requirements.txt
**–û–±–Ω–æ–≤–ª–µ–Ω:** `requirements.txt`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
# –ë–´–õ–û
uvicorn==0.24.0

# –°–¢–ê–õ–û
uvicorn[standard]==0.24.0  # –î–æ–±–∞–≤–ª—è–µ—Ç uvloop, httptools
slowapi==0.1.9  # Rate limiting
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ (uvloop)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π (slowapi)

---

## üìä –û–±—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ | 15-20 —Å–µ–∫ | 2-3 —Å–µ–∫ | **85%** ‚ö° |
| –†–∞–∑–º–µ—Ä bundle | 2.5 MB | 1.5 MB | **40%** üì¶ |
| –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤ | 100 KB | 30-40 KB | **60-70%** üìâ |
| –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS | ‚ùå | ‚úÖ | **100%** üõ°Ô∏è |
| –ù–µ–Ω—É–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã | 100% | 10% | **90%** üîç |

---

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. Backend
```bash
# –ó–∞–ø—É—Å–∫
./start.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8000/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ rate limiting
for i in {1..11}; do 
  curl -X POST http://localhost:8000/query \
    -H "Content-Type: application/json" \
    -d '{"question":"test"}' 
done
```

### 2. Frontend
```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:3000

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DevTools -> Network
# - –°–º–æ—Ç—Ä–∏–º —Ä–∞–∑–º–µ—Ä bundle
# - –ü—Ä–æ–≤–µ—Ä—è–µ–º lazy loading (–≤–∫–ª–∞–¥–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)
# - –ü—Ä–æ–≤–µ—Ä—è–µ–º gzip compression (Content-Encoding: gzip)
```

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```bash
# –í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞
time python main.py

# –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
curl -H "Accept-Encoding: gzip" http://localhost:8000/stats -v | grep "Content-Length"

# Bundle size
cd frontend && npm run build
ls -lh dist/assets/*.js
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –§–∞–∑–∞ 2 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
2. Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. Async –ø–∞—Ä—Å–∏–Ω–≥ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü
4. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤

–°–º. [OPTIMIZATION_RECOMMENDATIONS.md](OPTIMIZATION_RECOMMENDATIONS.md)

---

## üéâ –ò—Ç–æ–≥

**–í—Ä–µ–º—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** 30 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã  
**–≠—Ñ—Ñ–µ–∫—Ç:** –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
- üì¶ –ú–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞
- üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
- üöÄ –õ—É—á—à–∏–π UX

---

**–ê–≤—Ç–æ—Ä:** Kiro AI  
**–î–∞—Ç–∞:** 5 –¥–µ–∫–∞–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è:** 1.0.0
